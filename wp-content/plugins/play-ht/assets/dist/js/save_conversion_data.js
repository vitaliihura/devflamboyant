function asyncGeneratorStep(t,e,a,n,r,o,p){try{var s=t[o](p),i=s.value}catch(t){return void a(t)}s.done?e(i):Promise.resolve(i).then(n,r)}function _asyncToGenerator(t){return function(){var e=this,a=arguments;return new Promise(function(n,r){var o=t.apply(e,a);function p(t){asyncGeneratorStep(o,n,r,p,s,"next",t)}function s(t){asyncGeneratorStep(o,n,r,p,s,"throw",t)}p(void 0)})}}!function(t,e,a){e(function(){var t=wppp_conv_data?wppp_conv_data.userId:"",n={};if(wppp_conv_data.posts)Object.keys(wppp_conv_data.posts).map(function(t){v(t)}),Object.keys(wppp_conv_data.posts).length>0&&o(n);else if(wppp_conv_data.post_id&&wppp_conv_data.post&&wppp_conv_data.post.trans_id&&"1"==wppp_conv_data.post.audio_status){n[wppp_conv_data.post_id]=wppp_conv_data.post.trans_id,(r=e("#podcast-meta-box-id").find(".inside").find(".converting-msg-wrapper"))&&T(r),o(n,!0)}else if(wppp_conv_data.post_id&&wppp_conv_data.post&&wppp_conv_data.post.trans_id&&"2"==wppp_conv_data.post.audio_status){I(r=e("#podcast-meta-box-id").find(".inside").find(".converting-msg-wrapper"))}else if(wppp_conv_data.post_id&&wppp_conv_data.post&&wppp_conv_data.post.trans_id&&"3"==wppp_conv_data.post.audio_status){P(r=e("#podcast-meta-box-id").find(".inside").find(".converting-msg-wrapper"))}else if(wppp_conv_data.post_id&&wppp_conv_data.post&&!wppp_conv_data.post.trans_id||wppp_conv_data.post_id&&wppp_conv_data.post&&"ArraybodytranscriptionId"===wppp_conv_data.post.trans_id){var r;I(r=e("#podcast-meta-box-id").find(".inside").find(".converting-msg-wrapper"),"This post does not have audio.")}function o(t,a){e.each(t,function(n,r){if(r){var o=firebase.database().ref("articles").child(r);o.on("value",function p(s){var i,c,d,u=s.val();if(u&&u.error){var l=a?e("#podcast-meta-box-id").find(".inside").find(".converting-msg-wrapper"):e("#post-"+n).find(".has_audio");return a?P(l):(i=l,c=t,d='<div class="__play-tooltip-wide" data-tooltip="An error has happened, we have been informed and will fix it shortly. Please try converting other articles in the mean time." ><img src="'+wppp_images.audio_error+'" /><span>Error</span></div> <span class="retry_podcast"><a style="cursor:pointer;" id="playht-retry-audio" data-postid="'+c+'">Retry</a></span>',i.html(d)),e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"article_converted_failed",post_id:n}}),void o.off("value",p)}u&&u.transcriped&&void 0!==u.transcriptionUrl_mp3&&(o.off("value",p),window.wppp_conv_data&&(wppp_conv_data.post={article_audio:u.transcriptionUrl_mp3,audio_status:2,trans_id:r,voice:u.voice}),e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"article_converted_success",post_id:n,trans_id:r,audio_url:u.transcriptionUrl_mp3},success:function(t){a?e("#podcast-meta-box-id").find(".inside").find(".converting-msg-wrapper"):e("#post-"+n).find(".has_audio");a?(e("#podcast-meta-box-id .inside").html(t),I(e(".converting-msg-wrapper"))):v(n)},error:function(t){}}))})}})}function p(t){var a=t.postId,n=t.playArticleId,r=t.voice;return e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"save_draft",post_id:a,play_article_id:n,voice:r}})}function s(t){var a=t.postId;return e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"delete_draft",post_id:a}})}function i(t,e){return c.apply(this,arguments)}function c(){return(c=_asyncToGenerator(regeneratorRuntime.mark(function t(a,n){var r,o,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=null,p=localStorage.getItem("playht_auth_token"),r=wppp_conv_data.hasOwnProperty("posts")?wppp_conv_data.posts[n].trans_id:wppp_conv_data.post.trans_id,t.prev=3,t.next=6,e.ajax({type:"DELETE",url:"https://play.ht/api/articleInfo",data:{articleId:a,token:p,transcriptionId:r}});case 6:return o=t.sent,t.abrupt("return",o);case 10:t.prev=10,t.t0=t.catch(3),console.error(t.t0);case 13:case"end":return t.stop()}},t,null,[[3,10]])}))).apply(this,arguments)}function d(t){return u.apply(this,arguments)}function u(){return(u=_asyncToGenerator(regeneratorRuntime.mark(function t(a){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.postId,t.abrupt("return",e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"delete_article_audio",post_id:n}}));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function l(t){var a=t.postId;return new Promise(function(t,n){e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"retry_article_audio",post_id:a},success:function(e){var a=e.data.response;t(a)},error:function(t){n(t)}})})}function _(t){return e.ajax({type:"POST",url:wppp_conv_data.admin_url,dataType:"html",data:{action:"refresh_audio_menu",post_id:t},success:function(t){e("#podcast-meta-box-id .inside").html(t)},error:function(t){console.log("Error:",t)}})}function v(t){return e.ajax({type:"POST",url:wppp_conv_data.admin_url,dataType:"html",data:{action:"refresh_action_rows",post_id:t},success:function(a){e("#post-"+t+" .has_audio.column-has_audio").html(a)},error:function(t){console.log("Error:",t)}})}function f(t){return new Promise(function(t,a){e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"retrieve_default_voice"},success:function(e){e.success&&e.data.response?t(e.data.response):t(null)},error:function(a){t(e("#wppp_voice_meta option:selected").val())}})})}function h(t){return new Promise(function(a,n){e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"retrieve_post_meta_data",post_id:t},success:function(t){t.success&&t.data.response?a(t.data.response):a(null)},error:function(t){console.log("getPostMetaData -> error",t),a(null)}})})}function w(t){var e=[];return function t(a){if(!a.childNodes)return null;Array.prototype.forEach.call(a.childNodes,function(a){if(3===a.nodeType){var n=a.nodeValue.trim();n.length>0&&e.push(n)}else t(a)})}(t),e.join(" ").replace(/<[^>]*>?/gm,"")}function m(t,a,n,r,o,p,s,i,c,d,u){var l={url:t,voice:a,appId:n,userId:r,title:i,image:c,author_name:o,author_image:p,published_date:s,ssml:d,publishStatus:u?"draft":"published"};return new Promise(function(a,n){e.ajax({type:"POST",url:"https://play.ht/api/setArticleInfo",data:JSON.stringify(l),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e&&e.article?a(e.article.id):n("no articleInfo available for article: ",t)},error:function(t){n(t)}})})}function y(t,a,r,o,p,s,i,c){var d=wppp_conv_data.home_url+o;return new Promise(function(u,l){e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"save_post_conversion_data",lang:a,post_id:o,article_fallback_url:d,play_article_id:p,globalSpeed:c,voice:t,ssml:JSON.stringify(s),narrationStyle:r,wordsCount:i},success:function(t){try{n[o]=JSON.parse(t.data.response.body).transcriptionId,u(t)}catch(t){l(t)}},error:function(t){l(t)}})})}function g(t){return new Promise(function(a,n){e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"get_post_content_data",post_id:t},success:function(t){try{a(t.data.response)}catch(t){n(t)}},error:function(t){n(t)}})})}function b(t){return new Promise(function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(n){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t?e.ajax({url:"https://play.ht/api/user/fetchById",type:"POST",data:{token:"k35tyWMmBaf81CZcw4bqUuAJIgrzhENd",userId:t},success:function(t,e){n(t.data)},error:function(t){reject(t)}}):reject();case 1:case"end":return a.stop()}},a)}));return function(t){return a.apply(this,arguments)}}())}function x(t){return new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t?firebase.database().ref("articleData").child(t).once("value",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.val()?a(e.val()):a({});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()):reject();case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}function k(t,e){return new Promise(function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(n){var r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=4;break}firebase.database().ref("articlesContent").child(e).child("text").once("value",function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var o,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.val()){e.next=5;break}o=a.val().join("\n \n"),r=o.split("\n").filter(function(t){return t.trim()}).filter(Boolean),e.next=9;break;case 5:return e.next=7,g(t);case 7:p=e.sent,r=p.filter(function(t){return t.trim()}).filter(Boolean);case 9:n(r);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),a.next=9;break;case 4:return a.next=6,g(t);case 6:o=a.sent,r=o.filter(function(t){return t.trim()}).filter(Boolean),n(r);case 9:case"end":return a.stop()}},a)}));return function(t){return a.apply(this,arguments)}}())}function C(t){return new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t?firebase.database().ref("articlesContent").child(t).child("ssml").once("value",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.val()&&(r=e.val().join("\n \n"),n=r.split("\n").filter(function(t){return t.trim()}).filter(Boolean)),a(n);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()):a(null);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}function S(t,e){var n=arguments.length>2&&arguments[2]!==a?arguments[2]:"",r=arguments.length>3&&arguments[3]!==a?arguments[3]:"";playht__swal.fire({imageUrl:wppp_images.settings,title:r||"Loading ...",text:n||"",showConfirmButton:!1,animation:!1})}function T(t,e){var a='<img class="loading" src="'+wppp_images.settings+'"><span class="converting-text">'+e+"</span>";t.html(a)}function P(t){var e='<div class="__play-tooltip-wide" data-tooltip="An error has happened, we have been informed and will fix it shortly. Please try converting other articles in the mean time." ><img src="'+wppp_images.audio_error+'" style="width: 20px;"><span class="converting-text">Audio Conversion Error.</span></div>';t.html(e)}function I(t){var e=arguments.length>1&&arguments[1]!==a?arguments[1]:"This post has audio.",n='<img style="width: 20px;" src="'+("This post does not have audio."===e?wppp_images.no_audio:wppp_images.audio)+'" /><span class="converting-text">'+e+"</span>";t.html(n)}function R(t){var e=wppp_conv_data.current_credits?wppp_conv_data.current_credits.appsumo_words?Number(wppp_conv_data.current_credits.appsumo_words)+Number(wppp_conv_data.current_credits.words_count):Number(wppp_conv_data.current_credits.words_count):0;return Number(100)<=e}function A(t,a,n){if(t&&a){var r={userId:t,key:a,value:n};e.ajax({type:"POST",url:"https://play.ht/api/user-conf",data:JSON.stringify(r),contentType:"application/json; charset=utf-8",dataType:"json"}),r.action="playht_set_user_data",e.post({url:ajaxurl,data:r})}}function O(t){return new Promise(function(e,a){t?firebase.database().ref("favoriteVoices").child(t).once("value",function(t){e(t.val())}):a()})}function j(t,a){if(t&&a){var n={userId:t,favoriteVoices:a};e.ajax({type:"POST",url:"https://play.ht/api/user-favorite-voices",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json"})}}function E(t){return new Promise(function(e,a){t?firebase.database().ref("pronunciations").child(t).once("value",function(t){e(t.val())}):a()})}function B(t,a){if(t&&a){var n={userId:t,pronunciations:a};e.ajax({type:"POST",url:"https://play.ht/api/user-pronunciations",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json"})}}function G(a){var n=a.articleDataId,r=a.postId,o=a.narrationStyle,p=a.voice,s=a.title,i=a.postContent,c=a.ssml;return new Promise(function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(d,u){var l,_,v,f,h,w,y,g,S,T;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,b(t);case 3:return l=a.sent,a.next=6,E(t);case 6:return _=a.sent,a.next=9,O(t);case 9:if(v=a.sent,f=null,l&&l.conf&&(f=l.conf.pauses,h=l.conf.is_revision_mode_enabled),!c){a.next=16;break}a.t0=c,a.next=22;break;case 16:return a.next=18,C(n);case 18:if(a.t1=a.sent,a.t1){a.next=21;break}a.t1=null;case 21:a.t0=a.t1;case 22:if(w=a.t0,y={},a.prev=24,!n){a.next=29;break}return a.next=28,x(n);case 28:y=a.sent;case 29:a.next=34;break;case 31:a.prev=31,a.t2=a.catch(24),console.log("openArticleEditor -> error",a.t2);case 34:if(!w){a.next=38;break}a.t3=null,a.next=44;break;case 38:if(a.t4=i,a.t4){a.next=43;break}return a.next=42,k(r,n);case 42:a.t4=a.sent;case 43:a.t3=a.t4;case 44:g=a.t3,S=document.createElement("div"),T=document.createElement("div"),S.id="playht-tts-editor-root",T.id="playht-tts-editor-item",S.appendChild(T),document.body.append(S),ReactDOM.render(React.createElement(PlayhtTTSEditor.PlayhtTTSEditor,{onConvert:function(t){t?(w=t.patches,p=t.voice,o=t.narrationStyle,wordsCount=t.wordsCount,audiospeed=t.globalSpeed,t?d({articleSSMLContent:w,voice:p,narrationStyle:o,wordsCount:wordsCount,isDraft:!1,audiospeed:audiospeed}):u(),S.remove(),t.errors&&t.errors.length):u()},onCancel:function(t){d({articleSSMLContent:w,voice:p,narrationStyle:o,wordsCount:0,isDraft:!0,audiospeed:0}),S.remove(),playht__swal.close()},onAutoSave:function(t){if(t){w=t.patches,p=t.voice,o=t.narrationStyle,wordsCount=t.wordsCount,audiospeed=t.globalSpeed;var e,a,n,s,i,c,d="",l="",_="",v="",f="";if(wppp_conv_data.hasOwnProperty("post_author"))(d=wppp_conv_data.post_author.author_firstname+wppp_conv_data.post_author.author_lastname).length||(d=wppp_conv_data.post_author.author_name),l=wppp_conv_data.post_author.author_image,_=wppp_conv_data.post.image,v=wppp_conv_data.post.publish_date,f=wppp_conv_data.article_url;else d=wppp_conv_data.posts_authors&&wppp_conv_data.posts_authors[r].author_firstname&&wppp_conv_data.posts_authors[r].author_lastname?wppp_conv_data.posts_authors[r].author_firstname+" "+wppp_conv_data.posts_authors[r].author_lastname:wppp_conv_data.posts_authors[r].author_name,l=null===(e=wppp_conv_data.posts_authors)||void 0===e?void 0:null===(a=e[r])||void 0===a?void 0:a.author_image,_=null===(n=wppp_conv_data.posts)||void 0===n?void 0:null===(s=n[r])||void 0===s?void 0:s.image,v=null===(i=wppp_conv_data.posts)||void 0===i?void 0:null===(c=i[r])||void 0===c?void 0:c.published_date,f=wppp_conv_data.posts[r].url;return m(f,p,wppp_conv_data.appId,wppp_conv_data.userId,d,l,v,t.title,_,w,!0)}u()},onDefaultVoiceChange:function(e){A(t,"default_voice",e)},onPausesChange:function(e){A(t,"pauses",e)},onRevisionModeChange:function(e){A(t,"is_revision_mode_enabled",e)},onPronunciationsChange:function(e){B(t,e)},onFavoriteVoicesChange:function(e){j(t,e)},userId:t,text:g,ssml:w,voice:p,context:"wp",platform:"wordpress_plugin",title:s,skipToEditor:!0,convertBtnText:"Convert",pauses:f,pronunciations:_,isDraft:!n||"draft"===y.publishStatus,isRevisionModeEnabled:h,narrationStyle:o,containerSelector:".playht-tts-editor-modal-popup",favoriteVoices:v},null),document.getElementById("playht-tts-editor-item")),a.next=56;break;case 54:a.prev=54,a.t5=a.catch(0);case 56:return a.prev=56,e("#playht-edit-draft, #playht-edit-audio, #playht-add-audio").removeAttr("disabled"),playht__swal.closeModal(),a.finish(56);case 60:case"end":return a.stop()}},a,null,[[0,54,56,60],[24,31]])}));return function(t,e){return a.apply(this,arguments)}}())}var D,L=wppp_conv_data.can_convert;function M(t,a,r,s,i,c,d,u,l){t.each(_asyncToGenerator(regeneratorRuntime.mark(function t(){var h,w,g,b,x,k,C,S,T,P,I,R,A,O,j,E;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,h=this,w=e(this),g=h.value,b=wppp_conv_data.hasOwnProperty("posts")?wppp_conv_data.posts[g].title:wppp_conv_data.post.title,x="",k="",C="",S="",wppp_conv_data.hasOwnProperty("post_author")?((x=wppp_conv_data.post_author.author_firstname+wppp_conv_data.post_author.author_lastname).length||(x=wppp_conv_data.post_author.author_name),k=wppp_conv_data.post_author.author_image,C=wppp_conv_data.post.image,S=wppp_conv_data.post.publish_date):(x=wppp_conv_data.posts_authors&&wppp_conv_data.posts_authors[l].author_firstname&&wppp_conv_data.posts_authors[l].author_lastname?wppp_conv_data.posts_authors[l].author_firstname+" "+wppp_conv_data.posts_authors[l].author_lastname:wppp_conv_data.posts_authors[l].author_name,k=null===(T=wppp_conv_data.posts_authors)||void 0===T?void 0:null===(P=T[l])||void 0===P?void 0:P.author_image,C=null===(I=wppp_conv_data.posts)||void 0===I?void 0:null===(R=I[l])||void 0===R?void 0:R.image,S=null===(A=wppp_conv_data.posts)||void 0===A?void 0:null===(O=A[l])||void 0===O?void 0:O.published_date),t.t0=i,t.t0){t.next=15;break}return t.next=14,f();case 14:t.t0=t.sent;case 15:i=t.t0,j="",c=c||"",window.__playht__analytics&&__playht__analytics("playht__analytics.send","event","click","add-audio",wppp_conv_data.home_url+h.value),E=w.parentsUntil("tr").parent().find(".has_audio"),B=E,G=u?"Saving draft ...":"Converting ...",void 0,D='<span class="playht-converting"><img class="loading" src="'+wppp_images.settings+'" ><span>'+G+"</span></span>",B.html(D),m(wppp_conv_data.home_url+h.value,i,wppp_conv_data.appId,wppp_conv_data.userId,x,k,S,b,C,s,u).then(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(u){t.next=5;break}audiospeed="medium",y(i,j,c,h.value,e,s,d,audiospeed).then(function(t){(r+=1)===a&&o(n)}),t.next=13;break;case 5:return t.next=7,p({postId:l,playArticleId:e,voice:i});case 7:if(!wppp_conv_data.hasOwnProperty("posts")){t.next=11;break}v(l),t.next=13;break;case 11:return t.next=13,_(l);case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){console.log("processArticlesConversion -> error",t),playht__swal.fire({title:"Uh oh! Something Went Wrong :(",html:"<div class='__play-sw-modal-content'><div>Please try again! Or <span class='btn btn-primary posts-btn js__playht-chat-with-us' style='border-bottom: 1px solid #ddd; cursor: pointer;'>Click here to Contact us</span></div></div>",animation:!1,confirmButtonText:"Close",confirmButtonClass:"wppp-modal--cancel-btn"})}),t.next=28;break;case 25:t.prev=25,t.t1=t.catch(0),console.log("processArticlesConversion -> error",t.t1);case 28:case"end":return t.stop()}var B,G,D},t,this,[[0,25]])})))}e("body").on("click","#convert_podcast",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(a){var r,s,i,c,d,u,l,v,h,g,b,x,k,C,P,I,R,A,O,j,E,B,D;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(S(-1,1,"Starting the Audio Editor"),r=wp.data?wp.data.select("core/editor"):null,s=wp.data?wp.data.select("core"):null,i=null,c=null,r&&(d=r.getCurrentPost().content,u=e.parseHTML(d),i=u.map(function(t){return w(t)}).map(function(t){return t.trim().replace(/(?:\r\n|\r|\n)/g," ")}).map(function(t){return t.trim()}).filter(Boolean),s))try{l=r.getCurrentPost().author,v=s.getAuthors(),c=v.filter(function(t){return t.id===l})[0]}catch(t){console.log("postAuthorData error",t)}if(window.__playht__analytics&&__playht__analytics("playht__analytics.send","event","click","add-audio",wppp_conv_data.article_url),1!=L){t.next=34;break}return e(".wppp-notice").remove(),t.next=11,f();case 11:return h=t.sent,g="",b="",x=wppp_conv_data.post_title,k=c?c.name:wppp_conv_data.post_author&&wppp_conv_data.post_author.author_firstname&&wppp_conv_data.post_author.author_lastname?wppp_conv_data.post_author.author_firstname+" "+wppp_conv_data.post_author.author_lastname:wppp_conv_data.post_author.author_name,C=wppp_conv_data.post_id,P=wppp_conv_data.post.play_article_id,t.next=20,G({articleDataId:P,postId:C,narrationStyle:b,voice:h,title:x,postContent:i});case 20:I=t.sent,R=I.articleSSMLContent,A=I.voice,O=I.narrationStyle,j=I.wordsCount,E=I.isDraft,B=I.audiospeed,D=wppp_conv_data.post.published_date,T(e("#podcast-meta-box-id").find(".inside").find(".converting-msg-wrapper"),E?"Saving draft ...":"Converting ..."),m(wppp_conv_data.article_url,A,wppp_conv_data.appId,wppp_conv_data.userId,k,wppp_conv_data.post_author.author_image,D,x,wppp_conv_data.post.image,R,E).then(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(E){t.next=4;break}y(A,g,O,C,e,R,j,B).then(function(t){o(n,!0)}),t.next=9;break;case 4:return t.next=6,p({postId:C,playArticleId:e,voice:A});case 6:return t.next=8,_(C);case 8:!wppp_conv_data.post||wppp_conv_data.post&&!wppp_conv_data.post.play_article_id?wppp_conv_data.post={play_article_id:e,voice:A}:(wppp_conv_data.post.play_article_id=e,wppp_conv_data.post.voice=h);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){console.log(t),playht__swal.fire({title:"Uh oh! Something Went Wrong :(",html:"<div class='__play-sw-modal-content'><div>Please try again! Or <span class='btn btn-primary posts-btn js__playht-chat-with-us' style='border-bottom: 1px solid #ddd; cursor: pointer;'>Click here to Contact us</span></div></div>",animation:!1,confirmButtonText:"Close",confirmButtonClass:"wppp-modal--cancel-btn"})}),t.next=36;break;case 34:e(".wrap").prepend('<div class="notice notice-error wppp-notice is-dismissible"> <p>'+L.errors.play[0]+"</p></div>"),playht__swal.fire({imageUrl:wppp_images.cancel,title:"Error!",text:L.errors.play[0],confirmButtonText:"Close",confirmButtonClass:"wppp-modal--cancel-btn",animation:!1});case 36:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),e(document).on("click","#playht-add-audio",_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,n,r,o,p,s,i,c,d,u,l,_,v,w,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=this).hasAttribute("disabled")){t.next=3;break}return t.abrupt("return");case 3:if(e(a).attr("disabled",!0),1!=L){t.next=51;break}return e(".wppp-notice").remove(),n=e(a).data("postid"),t.next=9,f();case 9:if(r=t.sent,o="",p=e("tr#post-".concat(n)).find('input[type="checkbox"]'),R()){t.next=17;break}return window.__playht__analytics&&__playht__analytics("playht__analytics.send","event","click","no-credits",wppp_conv_data.article_url),playht__swal.fire({imageUrl:wppp_images.no_credits,title:"Sorry, you don't have any words left!",html:"<div class='__play-sw-modal-content'><div>Sorry, we are unable to add audio to your articles because you don’t have enough words left! Please purchase them from the link below and you will be able to add audio to your articles again :)</div><a href='https://play.ht/wordpress/upgrade' target='_blank' class='wppp-modal-ok-btn'>Get More Words</a></div>",animation:!1,showConfirmButton:!1}),a.removeAttribute("disabled"),t.abrupt("return",!1);case 17:return S(-1,1,"Starting the Audio Editor"),t.prev=18,s=null,i=null,t.prev=21,t.next=24,h(n);case 24:s=t.sent,t.next=29;break;case 27:t.prev=27,t.t0=t.catch(21);case 29:return c=s?s.play_article_id:wppp_conv_data.posts&&wppp_conv_data.posts[n]&&wppp_conv_data.posts[n].play_article_id,d=wppp_conv_data.hasOwnProperty("posts")?wppp_conv_data.posts[n].title:wppp_conv_data.title,t.next=33,G({articleDataId:c,postId:n,narrationStyle:o,voice:r,title:d,postContent:i});case 33:u=t.sent,l=u.articleSSMLContent,_=u.voice,v=u.narrationStyle,w=u.wordsCount,m=u.isDraft,u.audiospeed,M(p,1,0,l,_,v,w,m,n),t.next=46;break;case 43:t.prev=43,t.t1=t.catch(18),console.log("error",t.t1);case 46:return t.prev=46,a.removeAttribute("disabled"),t.finish(46);case 49:t.next=54;break;case 51:e(".wrap").prepend('<div class="notice notice-error wppp-notice is-dismissible"> <p>'+L.errors.play[0]+"</p></div>"),window.scrollTo(0,0),playht__swal.fire({imageUrl:wppp_images.cancel,title:"Error!",text:L.errors.play[0],confirmButtonText:"Close",confirmButtonClass:"wppp-modal--cancel-btn",animation:!1});case 54:a.removeAttribute("disabled");case 55:case"end":return t.stop()}},t,this,[[18,43,46,49],[21,27]])}))),e(document).on("click","#playht-edit-draft",_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,n,r,o,p,s,i,c,d,u,l,_,v,w,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=this).hasAttribute("disabled")){t.next=3;break}return t.abrupt("return");case 3:if(e(a).attr("disabled",!0),1!=L){t.next=51;break}if(e(".wppp-notice").remove(),n=e(a).data("postid"),!(wppp_conv_data.posts&&wppp_conv_data.posts[n]&&wppp_conv_data.posts[n].voice)){t.next=11;break}t.t0=wppp_conv_data.posts[n].voice,t.next=14;break;case 11:return t.next=13,f();case 13:t.t0=t.sent;case 14:return r=t.t0,o="",p=e("tr#post-".concat(n)).find('input[type="checkbox"]'),S(-1,1,"Starting the Audio Editor"),t.prev=18,s=null,i=null,t.prev=21,t.next=24,h(n);case 24:s=t.sent,t.next=29;break;case 27:t.prev=27,t.t1=t.catch(21);case 29:return c=s?s.play_article_id:wppp_conv_data.posts&&wppp_conv_data.posts[n]&&wppp_conv_data.posts[n].play_article_id,d=wppp_conv_data.hasOwnProperty("posts")?wppp_conv_data.posts[n].title:wppp_conv_data.post_title,t.next=33,G({articleDataId:c,postId:n,narrationStyle:o,voice:r,title:d,postContent:i});case 33:u=t.sent,l=u.articleSSMLContent,_=u.voice,v=u.narrationStyle,w=u.wordsCount,m=u.isDraft,u.audiospeed,M(p,1,0,l,_,v,w,m,n),t.next=46;break;case 43:t.prev=43,t.t2=t.catch(18),console.log("error",t.t2);case 46:return t.prev=46,a.removeAttribute("disabled"),t.finish(46);case 49:t.next=54;break;case 51:e(".wrap").prepend('<div class="notice notice-error wppp-notice is-dismissible"> <p>'+L.errors.play[0]+"</p></div>"),window.scrollTo(0,0),playht__swal.fire({imageUrl:wppp_images.cancel,title:"Error!",text:L.errors.play[0],confirmButtonText:"Close",confirmButtonClass:"wppp-modal--cancel-btn",animation:!1});case 54:a.removeAttribute("disabled");case 55:case"end":return t.stop()}},t,this,[[18,43,46,49],[21,27]])}))),e(document).on("click","#playht-delete-audio",_asyncToGenerator(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e(this).data("postid"),t.next=4,playht__swal.fire({title:"Are you sure you want to delete this Audio?",text:"This action will remove the audio from this post",animation:!1,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"});case 4:if(t.sent.value){t.next=8;break}return playht__swal.closeModal(),t.abrupt("return");case 8:return playht__swal.showLoading(),t.next=11,d({postId:a});case 11:wppp_conv_data.hasOwnProperty("posts")?v(a):_(a),playht__swal.fire("Deleted!","Your Audio has been deleted!","success"),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),console.log("TCL: error",t.t0),playht__swal.fire("Error!","An Error has happened while deleting your Audio","error");case 19:case"end":return t.stop()}},t,this,[[0,15]])}))),e(document).on("click","#playht-retry-audio",_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e(this).data("postid"),playht__swal.showLoading(),t.next=5,l({postId:a});case 5:r=t.sent,n[a]=r,e.each(n,function(t,n){if(n){var r=firebase.database().ref("articles").child(n);r.on("value",function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(s){var i,c,d,u,l,_,w,m,y,g,b,x,k,C,T,P;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(i=s.val())||!i.error){o.next=45;break}return c=0,d=0,e(".wppp-notice").remove(),o.next=7,f();case 7:if(u=o.sent,l="",_=e("input#cb-select-"+a),_.length,R()){o.next=16;break}return window.__playht__analytics&&__playht__analytics("playht__analytics.send","event","click","no-credits",wppp_conv_data.article_url),playht__swal.fire({imageUrl:wppp_images.no_credits,title:"Sorry, you don't have any words left!",html:"<div class='__play-sw-modal-content'><div>Sorry, we are unable to add audio to your articles because you don’t have enough words left! Please purchase them from the link below and you will be able to add audio to your articles again :)</div><a href='https://play.ht/wordpress/upgrade' target='_blank' class='wppp-modal-ok-btn'>Get More Words</a></div>",animation:!1,showConfirmButton:!1}),o.abrupt("return",!1);case 16:return S(-1,1,"Starting the Audio Editor"),o.prev=17,w=null,m=null,o.prev=20,o.next=23,h(a);case 23:w=o.sent,o.next=28;break;case 26:o.prev=26,o.t0=o.catch(20);case 28:return y=w?w.play_article_id:wppp_conv_data.posts&&wppp_conv_data.posts[a]&&wppp_conv_data.posts[a].play_article_id,g=wppp_conv_data.posts&&wppp_conv_data.posts[a]&&wppp_conv_data.posts[a].title,o.next=32,G({articleDataId:y,postId:a,narrationStyle:l,voice:u,title:g,postContent:m});case 32:b=o.sent,x=b.articleSSMLContent,k=b.voice,C=b.narrationStyle,T=b.wordsCount,P=b.isDraft,b.audiospeed,M(_,c,d,x,k,C,T,P,a),o.next=45;break;case 42:o.prev=42,o.t1=o.catch(17),console.log("error",o.t1);case 45:i&&i.transcriped&&void 0!==i.transcriptionUrl_mp3&&(r.off("value",p),window.wppp_conv_data&&(wppp_conv_data.post={article_audio:i.transcriptionUrl_mp3,audio_status:2,trans_id:n,voice:i.voice}),e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"article_converted_success",post_id:t,trans_id:n,audio_url:i.transcriptionUrl_mp3},success:function(e){v(t),playht__swal.fire("Retrieved!","Your Audio has been retrieved!","success")}}));case 46:case"end":return o.stop()}},o,null,[[17,42],[20,26]])}));function p(t){return o.apply(this,arguments)}return p}())}}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("TCL: error",t.t0),playht__swal.fire("Error!","An Error has happened while retrieving your Audio","error");case 14:case"end":return t.stop()}},t,this,[[0,10]])}))),e(document).on("click","#playht-delete-draft",_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,n,r,o,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e(this).data("postid"),t.next=4,playht__swal.fire({title:"Are you sure you want to delete this Draft?",text:"this action will remove all the audio edits in this Draft.",animation:!1,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"});case 4:if(t.sent.value){t.next=8;break}return playht__swal.closeModal(),t.abrupt("return");case 8:return playht__swal.showLoading(),n=null,t.prev=10,t.next=13,h(a);case 13:n=t.sent,t.next=18;break;case 16:t.prev=16,t.t0=t.catch(10);case 18:return r=n?n.play_article_id:wppp_conv_data.posts&&wppp_conv_data.posts[a]&&wppp_conv_data.posts[a].play_article_id,o=localStorage.getItem("playht_auth_token"),p=wppp_retrieve.user_id,console.log("user_id: "+p+" postId: "+r),t.next=24,e.ajax({type:"POST",url:"https://play.ht/api/deleteDraft",data:{token:o,userId:p,articleId:r}});case 24:return t.next=26,s({postId:a});case 26:if(console.log("draft deleted"),!wppp_conv_data.hasOwnProperty("posts")){t.next=32;break}return t.next=30,v(a);case 30:t.next=34;break;case 32:return t.next=34,_(a);case 34:console.log("before popup"),playht__swal.fire("Deleted!","Your Draft has been deleted!","success"),t.next=42;break;case 38:t.prev=38,t.t1=t.catch(0),console.log("TCL: error",t.t1),playht__swal.fire("Error!","An Error has happened while deleting your draft, please try again or use <a target='_blank' href='https://play.ht/app/audio-files'>our dashboard to manage your audio files and drafts!</a>","error");case 42:case"end":return t.stop()}},t,this,[[0,38],[10,16]])}))),e(document).on("click","#playht-edit-audio",_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=this).hasAttribute("disabled")){t.next=3;break}return t.abrupt("return");case 3:if(e(a).attr("disabled",!0),1==L){t.next=10;break}return e(".wrap").prepend('<div class="notice notice-error wppp-notice is-dismissible"> <p>'+L.errors.play[0]+"</p></div>"),window.scrollTo(0,0),playht__swal.fire({imageUrl:wppp_images.cancel,title:"Error!",text:L.errors.play[0],confirmButtonText:"Close",confirmButtonClass:"wppp-modal--cancel-btn",animation:!1}),a.removeAttribute("disabled"),t.abrupt("return");case 10:e(".wppp-notice").remove(),n=e(a).data("postid"),r=e("tr#post-".concat(n)).find('input[type="checkbox"]'),playht__swal.fire({title:"Are you sure?",text:"Editing the audio will replace the existing audio, you will not miss your edits.",confirmButtonText:"Yes",confirmButtonClass:"swal2-confirm swal2-styled",cancelButtonText:"No",cancelButtonClass:"swal2-cancel swal2-styled",focusConfirm:!1,focusCancel:!0,showCancelButton:!0,showCloseButton:!0,allowEscapeKey:!0,allowEnterKey:!1,animation:!1}).then(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var o,p,s,c,u,l,f,w,m,y,g,b;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.hasOwnProperty("dismiss")){t.next=3;break}return a.removeAttribute("disabled"),t.abrupt("return");case 3:return S(-1,1,"Starting the Audio Editor"),t.prev=4,o=null,p=null,t.prev=7,t.next=10,h(n);case 10:o=t.sent,t.next=15;break;case 13:t.prev=13,t.t0=t.catch(7);case 15:return s=o?o.play_article_id:wppp_conv_data.posts&&wppp_conv_data.posts[n]&&wppp_conv_data.posts[n].play_article_id,c=wppp_conv_data.hasOwnProperty("posts")?wppp_conv_data.posts[n].title:wppp_conv_data.post_title,t.next=19,C(s);case 19:return u=t.sent,t.next=22,x(s);case 22:return l=t.sent,f=l.voice,w=l.narrationStyle,m=l.wordsCount,t.next=28,i(s,n);case 28:return t.next=30,d({postId:n});case 30:return t.next=32,G({articleDataId:s,postId:n,narrationStyle:w,voice:f,title:c,postContent:p,ssml:u});case 32:y=t.sent,g=y.articleSSMLContent,b=y.isDraft,wppp_conv_data.hasOwnProperty("posts")?v(n):_(n),M(r,1,0,g,f,w,m,b,n),t.next=42;break;case 39:t.prev=39,t.t1=t.catch(4),console.log("error",t.t1);case 42:return t.prev=42,a.removeAttribute("disabled"),t.finish(42);case 45:case"end":return t.stop()}},t,null,[[4,39,42,45],[7,13]])}));return function(e){return t.apply(this,arguments)}}()),a.removeAttribute("disabled");case 15:case"end":return t.stop()}},t,this)})));var U=new Audio;function N(){e(".playht-icon-pause-circled").addClass("playht-icon-play-circled").removeClass("playht-icon-pause-circled")}U.addEventListener("ended",function(){N()}),U.addEventListener("pause",function(){N()}),U.addEventListener("play",function(){N(),function(t){e(t).find(".playht-icon-play-circled").addClass("playht-icon-pause-circled").removeClass("playht-icon-play-circled")}(D)}),e(document).on("click",".playht-admin-audio-player",function(t){var e=(D=t.currentTarget).dataset.audio;U.src!==e&&(U.src=e),U&&U.paused?U.play():U.pause()})})}(window,jQuery);