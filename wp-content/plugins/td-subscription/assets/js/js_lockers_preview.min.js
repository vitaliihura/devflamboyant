var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};jQuery(document).on("click",".tds-update-preview",function(b){b.preventDefault();window.tdLockerEditor.refresh_preview()});
jQuery().ready(function(){window.tdLockerEditor.refresh_preview();jQuery("body").on("click",".tds-submit-btn",function(b){b.preventDefault()})});window.tdLockerEditor||(window.tdLockerEditor={});
(function(b){window.tdLockerEditor={init:function(){this.track_input_changes();this.initialize_color_pickers()},initialize_color_pickers:function(){var a=this;b().wpColorPicker&&b("input.tds-color-picker").wpColorPicker({change:_.debounce(function(b,d){a.refresh_preview()},500),clear:function(b){a.refresh_preview()}})},get_locker_options:function(){var a={},c=["#tds_locker_types_metabox","#tds_locker_settings_metabox","#tds_locker_styles_metabox"],d=!1,g;for(g in c)b(c[g]).find("input, select, textarea").each(function(){var e=
b(this);if(!e.is("input")||"text"===e.attr("type")||"checkbox"===e.attr("type")){var c=e.attr("name").match(/\[(.*?)\]/);c&&(c=c[1],"tds_pp_msg"===c?a[c]=window.btoa(encodeURIComponent(e.val())):"checkbox"===e.attr("type")?(a[c]=e.is(":checked")?"on":"",!0===e.is(":checked")&&(d=!0)):a[c]=e.val())}});a.checked_plan=d;a.tds_leads_list="";return a},track_input_changes:function(){var a=this,c=["#tds_locker_types_metabox","#tds_locker_settings_metabox","#tds_locker_styles_metabox"],d;for(d in c)b(c[d]).find("input, select, textarea").on("change keyup paste",
_.debounce(function(){a.refresh_preview()},500))},refresh_preview:function(){var a=b(".preview-html"),c=b(".preview-loader");a.addClass("preview-html-loading");c.addClass("preview-loader-visible");for(var d=this.get_locker_options(),g="",e=!1,k=$jscomp.makeIterator(Object.entries(d)),f=k.next();!f.done;f=k.next()){var h=$jscomp.makeIterator(f.value);f=h.next().value;h=h.next().value;g+=f+'="'+h+'" ';"tds_paid_subs_page_id"===f&&""===h&&(e=!0)}console.log();d="paid_subscription"===d.tds_payable&&!0===
e?'<div class="tds-s-notif tds-s-notif-sm tds-s-notif-warn"><div class="tds-s-notif-descr">Please type the ID of the Plans Page you want to use for this locker.</div></div>':"paid_subscription"===d.tds_payable&&!1===d.checked_plan?'<div class="tds-s-notif tds-s-notif-sm tds-s-notif-warn"><div class="tds-s-notif-descr">Please select the Plans you want to use for this locker.</div></div>':"[tds_locker "+g+"]";b.ajax({timeout:1E4,type:"POST",url:this.get_rest_endpoint("tds_preview/do_job","uuid="+this.get_unique_id()),
beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tds_js_globals.wpRestNonce)},cache:!0,data:{shortcode:d,replyHtml:""},dataType:"json",statusCode:{404:function(){console.log("tds preview - ERROR: 404 not found")},500:function(){console.log("tds preview - ERROR: 500 server error")}},success:function(b){null===b?console.log("%c tds preview - ERROR: Empty response received from server","color: orangered;"):(console.log("%c tds preview data response received from server","color: green;"),
console.log(b),_.has(b,"replyHtml")&&(a.html(b.replyHtml),setTimeout(function(){c.removeClass("preview-loader-visible");setTimeout(function(){a.removeClass("preview-html-loading")},400)},300)))},error:function(a,b,c){console.log("tds preview - Error callback - textStatus: "+b+" errorThrown: "+c)}})},get_rest_endpoint:function(a,b){return _.isEmpty(window.tds_js_globals.permalinkStructure)?window.tds_js_globals.wpRestUrl+a+"&"+b:window.tds_js_globals.wpRestUrl+a+"?"+b},get_unique_id:function(){function a(){return Math.floor(65536*
(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}};b(function(){window.tdLockerEditor.init()})})(jQuery);
