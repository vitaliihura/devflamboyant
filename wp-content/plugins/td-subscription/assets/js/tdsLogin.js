var tdsLogin={};jQuery().ready(function(){"undefined"!==typeof tdLogin&&tdsLogin.init()});
(function(){tdsLogin={items:[],item:function(){this.blockObj=this.uid="";this.isLoginRegisterPage=!1;this.passwordResetFromHTML=this.passwordRecoveryFromHTML=this.registerFormHTML=this.loginFormHTML=this.lostPassURL=this.registerURL=this.loginURL=this.currFormType="";this._is_initialized=!1},init:function(){tdsLogin.items=[]},addItem:function(a){if("undefined"===typeof a.uid)throw"item.uid is not defined";tdsLogin.items.push(a);tdsLogin._initialize_item(a)},deleteItem:function(a){for(var b=0;b<tdsLogin.items.length;b++)if(tdsLogin.items[b].uid===
a)return tdsLogin.items.splice(b,1),!0;return!1},resetItems:function(){tdsLogin.items=[]},_initialize_item:function(a){!0!==a._is_initialized&&(tdsLogin._listen_to_events(a),tdsLogin._form_switcher(a),a._is_initialized=!0)},_listen_to_events:function(a){jQuery("body").on("keydown","."+a.uid+" #tds_reset_new_password, ."+a.uid+" #tds_reset_new_password_confirm",function(b){13===b.keyCode&&a.blockObj.find("#tds_reset_button").click()}).on("click","."+a.uid+" #tds_reset_button",function(){var b=a.blockObj.find("#tds_reset_key").val().trim(),
c=a.blockObj.find("#tds_reset_user_login").val().trim(),f=a.blockObj.find("#tds_reset_redirect").val().trim(),d=a.blockObj.find("#tds_reset_new_password").val().trim(),e=a.blockObj.find("#tds_reset_new_password_confirm").val().trim();tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-error"]);tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-success"]);tdLogin.showHideMsg(window.td_please_wait);""===d?(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",
0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_reset_pass_empty)):tdLogin.pass_pattern.test(d)?""!==d&&""===e?(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_reset_pass_confirm_empty)):d!==e?(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_reset_pass_not_matching)):
tdLogin.doCustomAction("td_mod_subscription_reset_pass",b,c,d,e,f):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_pass_pattern_incorrect))}).on("keydown","."+a.uid+" #tds_forgot_email",function(b){13===b.keyCode&&a.blockObj.find("#tds_forgot_button").click()}).on("click","."+a.uid+" #tds_forgot_button",function(){var b=a.blockObj.find("#tds_forgot_email");b.length&&(b=b.val().trim(),
tdLogin.email_pattern.test(b)?(tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_please_wait),tdLogin.doCustomAction("td_mod_remember_pass",b,"","")):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_email_incorrect)))}).on("keydown","."+a.uid+" #tds_register_email, ."+a.uid+
" #tds_register_user, ."+a.uid+" #tds_register_pass, ."+a.uid+" #tds_register_retype_pass",function(b){13===b.keyCode&&a.blockObj.find("#tds_register_button").click()}).on("click","."+a.uid+" #tds_register_button",function(b){b.preventDefault();b=a.blockObj.find("#tds_register_email");var c=a.blockObj.find("#tds_register_user"),f=a.blockObj.find("#tds_register_pass"),d=a.blockObj.find("#tds_register_retype_pass"),e=a.blockObj.find("#gRecaptchaResponseR");if(b.length&&c.length&&f.length&&d.length){var h=
b.val().trim(),g=c.val().trim(),k=f.val().trim(),l=d.val().trim(),n=e.attr("data-sitekey"),m="";tdLogin.email_pattern.test(h)?g?k?tdLogin.pass_pattern.test(k)?k!==l?(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_retype_pass_incorrect)):e.length?grecaptcha.ready(function(){grecaptcha.execute(n,{action:"submit"}).then(function(a){m=a;tdLogin.doCustomAction("td_mod_subscription_register",
h,g,k,l,m)})}):tdLogin.doCustomAction("td_mod_subscription_register",h,g,k,l):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_pass_pattern_incorrect)):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_pass_empty)):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),
tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_user_incorrect)):(tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"]),tdLogin.showHideMsg(window.td_email_incorrect))}}).on("keydown","."+a.uid+" #tds_login_pass, "+a.uid+" #tds_login_email",function(b){13===b.keyCode&&a.blockObj.find("#tds_login_button").click()}).on("click","."+a.uid+" #tds_login_button",function(b){b.preventDefault();
b=a.blockObj.find("#tds_login_email");var c=a.blockObj.find("#tds_login_pass"),f=a.blockObj.find("#gRecaptchaResponseL");if(b.length&&c.length){var d=b.val().trim(),e=c.val().trim(),h=f.attr("data-sitekey"),g="";""===d?(tdLogin.showHideMsg(window.td_email_user_empty),tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"])):""===e?(tdLogin.showHideMsg(window.td_pass_empty),tdLogin.addRemoveClass([".td_display_err",1,"tds-s-notif-error"]),
tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"])):f.length?grecaptcha.ready(function(){grecaptcha.execute(h,{action:"submit"}).then(function(a){g=a;tdLogin.doCustomAction("td_mod_login",d,"",e,"",g);tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-error"]);tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-success"])})}):(tdLogin.doCustomAction("td_mod_login",d,"",e),tdLogin.addRemoveClass([".td_display_err",0,"tds-s-notif-error"]),tdLogin.addRemoveClass([".td_display_err",
0,"tds-s-notif-success"]))}}).on("click","."+a.uid+" #tds-login-div .td-login-fb-subscr",function(a){a.preventDefault();tdLogin.doFBLoginActionOptIn("login",jQuery(this))}).on("click","."+a.uid+" #tds-register-div .td-login-fb-subscr",function(a){a.preventDefault();tdLogin.doFBLoginActionOptIn("register",jQuery(this))})},_form_switcher:function(a){var b=a.blockObj,c=b.find(".tds-block-inner");a.isLoginRegisterPage&&(history.replaceState({tds_ca_form_type:a.currFormType},null,window.location.href),
window.addEventListener("popstate",function(b){b=b.state.tds_ca_form_type;history.replaceState({tds_ca_form_type:b},null,window.location.href);switch(b){case "login":c.html(tdsMain.b64DecodeUnicode(a.loginFormHTML));break;case "register":c.html(tdsMain.b64DecodeUnicode(a.registerFormHTML));break;case "password_recovery":c.html(tdsMain.b64DecodeUnicode(a.passwordRecoveryFromHTML));break;case "password_reset":c.html(tdsMain.b64DecodeUnicode(a.passwordResetFromHTML))}},!1));b.on("click",".tds-ca-login-link",
function(b){b.preventDefault();c.html(tdsMain.b64DecodeUnicode(a.loginFormHTML));a.isLoginRegisterPage&&history.pushState({tds_ca_form_type:"login"},null,a.loginURL)}).on("click",".tds-ca-register-link",function(b){b.preventDefault();c.html(tdsMain.b64DecodeUnicode(a.registerFormHTML));a.isLoginRegisterPage&&history.pushState({tds_ca_form_type:"register"},null,a.registerURL)}).on("click",".tds-ca-forgot-pass-link",function(b){b.preventDefault();c.html(tdsMain.b64DecodeUnicode(a.passwordRecoveryFromHTML));
a.isLoginRegisterPage&&history.pushState({tds_ca_form_type:"password_recovery"},null,a.lostPassURL)})}}})();
